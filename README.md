# Setup

This project contains the dockerised Strapi v4 alongside scripts that makes it easy to quickstart. The problem with Strapi is that the official image provided by Strapi is running on v3 instead of v4 which is the latest (as of May 2022).

The versioning is not so much of a big issue since v3 works fine. The **main** issue I've had with running dockerised strapi was the fact that some of the node dependencies are platform dependent. If you installed the node dependencies on a Windows machine, it will not run through docker. This is where our `init.sh` script comes in. We launch a stealth, basic, `node:16-alpine` package (exact same as our `docker-compose`) to install the dependencies and build the scaffolding. This will create the `app/` folder you see in this repo. I've hardcoded in the options for now since I know what I need it fo be for this use case. To improve on this would be to enforce an .env that flows into both the `docker-compose` and the `*.sh` files.

Another glaring problem is that the build time is obscenely long and consumes a lot of memory. This is a huge problem since if you ever need to deploy or make server configuration change, you would need to rebuild the files and run Strapi. If you are running on a home pc then this is no problem. I ran this on the cheapest Digital Ocean Droplet and it ran out of memory. Surprisingly, the solution was to use `yarn` instead of `npm`. Running `yarn build` with the flag `--no-optimization` has completely solved this issue. Hence, the need for `build.sh` script. You can do this manually of course though I've included it here. In the future, I might also add a GitHub actions script and GitLab CI script where you would be able to deploy/build/restart and even trigger your instances to run as `production` or `dev`.
